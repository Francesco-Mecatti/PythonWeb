<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Server stats</title>
</head>
<body onload="refreshStats()">
    <h1> Server stats </h1>
        <h2> Average load: </h2>
            <div id="average-load"></div>  <!-- percentage -->
        <h2> Memory </h2>
            <h3> Total: </h3>
                <div id="memory-total"></div>
            <h3> Available: </h3>
                <div id="memory-available"></div>
            <h3> In-use: </h3>  <!-- percentage -->
                <div id="memory-in-use"></div>
         <h2> Disk </h2>
            <h3> Total: </h3>
                <div id="disk-total"></div>
            <h3> In-use: </h3>
                <div id="disk-in-use"></div>  <!-- percentage -->
            <h3> Available: </h3>
                <div id="disk-available"></div>
        <h2> Network </h2>
            <h3> Bytes </h3>
                <h4> Sent: </h4>
                    <div id="network-bytes-sent"></div>
                <h4> Received: </h4>
                    <div id="network-bytes-received"></div>
            <h3> Packets </h3>
                <h4> Sent: </h4>
                    <div id="network-packets-sent"></div>
                <h4> Received: </h4>
                    <div id="network-packets-received"></div>
        <h2> Boot time: </h2>
            <div id="boot-time"></div>
    <br>
    <button type="button" onclick="refreshStats()"> Refresh </button>
</body>
<script>
    function refreshStats() {
        function fillStats(stats) {
            document.getElementById("average-load").innerHTML = stats.average_load + "%";
            document.getElementById("memory-total").innerHTML = stats.memory.total;
            document.getElementById("memory-available").innerHTML = stats.memory.available;
            document.getElementById("memory-in-use").innerHTML = stats.memory.in_use + "%";
            document.getElementById("disk-total").innerHTML = stats.disk.total;
            document.getElementById("disk-in-use").innerHTML = stats.disk.in_use + "%";
            document.getElementById("disk-available").innerHTML = stats.disk.available;
            document.getElementById("network-bytes-sent").innerHTML = stats.network.bytes.sent;
            document.getElementById("network-bytes-received").innerHTML = stats.network.bytes.received;
            document.getElementById("network-packets-sent").innerHTML = stats.network.packets.sent;
            document.getElementById("network-packets-received").innerHTML = stats.network.packets.received;
            document.getElementById("boot-time").innerHTML = stats.boot_time;
        }
        let xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
                const stats = JSON.parse(this.responseText);
                fillStats(stats);
            }
        }
        xhttp.open("GET", "/cgi-bin/ajax_stats.py", true);
        xhttp.send();
    }
</script>
<style>
    h2 {
        text-indent: 3em;
    }
    h3 {
        text-indent: 5em;
    }
    h4 {
        text-indent: 8em;
    }
    div {
        text-indent: 15em;
    }
</style>
</html>